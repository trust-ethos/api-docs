# Schemas for Vouch API

VouchActivity:
  type: object
  required:
    - id
    - authorProfileId
    - subjectProfileId
    - comment
    - amount
    - balance
    - activityCheckpoints
  properties:
    id:
      type: integer
      description: Unique identifier for the vouch
    authorProfileId:
      type: integer
      description: Profile ID of the vouch author
    subjectProfileId:
      type: integer
      description: Profile ID of the vouch subject
    subjectAddress:
      type: string
      description: Ethereum address of the vouch subject (if applicable)
    attestationHash:
      type: string
      description: Attestation hash for the vouch (if applicable)
    comment:
      type: string
      description: Comment or message associated with the vouch
    amount:
      type: string
      description: Amount of ETH initially vouched
    balance:
      type: string
      description: Current balance of the vouch
    activityCheckpoints:
      type: object
      required:
        - vouchedAt
        - updatedAt
      properties:
        vouchedAt:
          type: string
          format: date-time
          description: Timestamp when the vouch was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the vouch was last updated
    mutualId:
      type: integer
      nullable: true
      description: ID of the mutual vouch, if one exists
    events:
      type: array
      description: Blockchain events associated with the vouch
      items:
        $ref: './common.yaml#/BlockchainEvent'
    attestationDetails:
      type: object
      nullable: true
      properties:
        service:
          type: string
          description: Service name (e.g., "x.com")
        account:
          type: string
          description: Account identifier on the service

VouchQueryRequest:
  type: object
  properties:
    ids:
      type: array
      description: Array of specific vouch IDs to retrieve
      items:
        type: integer
    authorProfileIds:
      type: array
      description: Array of profile IDs that authored vouches
      items:
        type: integer
    subjectProfileIds:
      type: array
      description: Array of profile IDs that received vouches
      items:
        type: integer
    subjectAddresses:
      type: array
      description: Array of Ethereum addresses that received vouches
      items:
        type: string
    subjectAttestationHashes:
      type: array
      description: Array of attestation hashes for subjects
      items:
        type: string
    archived:
      type: boolean
      description: Whether to include archived vouches
    duration:
      type: string
      description: Filter vouches by time period (e.g., "7d", "1w")
    orderBy:
      type: object
      description: Sorting criteria
      additionalProperties:
        type: string
        enum: [asc, desc]
    limit:
      type: integer
      minimum: 1
      maximum: 100
      default: 20
      description: Maximum number of results to return
    offset:
      type: integer
      minimum: 0
      default: 0
      description: Number of results to skip for pagination

VouchQueryResponse:
  type: object
  required:
    - values
    - limit
    - offset
    - total
  properties:
    values:
      type: array
      description: List of vouches matching the query criteria
      items:
        $ref: '#/VouchActivity'
    limit:
      type: integer
      description: Maximum number of results returned
    offset:
      type: integer
      description: Offset of the results
    total:
      type: integer
      description: Total number of vouches matching the query criteria

VouchCountRequest:
  type: object
  properties:
    ids:
      type: array
      description: Array of specific vouch IDs to count
      items:
        type: integer
    authorProfileIds:
      type: array
      description: Array of profile IDs that authored vouches
      items:
        type: integer
    subjectProfileIds:
      type: array
      description: Array of profile IDs that received vouches
      items:
        type: integer
    subjectAddresses:
      type: array
      description: Array of Ethereum addresses that received vouches
      items:
        type: string
    subjectAttestationHashes:
      type: array
      description: Array of attestation hashes for subjects
      items:
        type: string
    archived:
      type: boolean
      description: Whether to include archived vouches
    duration:
      type: string
      description: Filter vouches by time period (e.g., "7d", "1w")

VouchCountResponse:
  type: object
  required:
    - count
  properties:
    count:
      type: integer
      description: Number of vouches matching the criteria

VouchStatsRequest:
  type: object
  required:
    - target
  properties:
    target:
      type: string
      description: User identifier (address, profile ID, or attestation in format `service:account`)

VouchStatsResponse:
  type: object
  required:
    - staked
    - balance
    - count
    - percentile
  properties:
    staked:
      type: object
      required:
        - received
        - deposited
        - mutual
      properties:
        received:
          type: number
          description: Total amount staked in vouches received
        deposited:
          type: number
          description: Total amount staked in vouches deposited
        mutual:
          type: number
          description: Total amount staked in mutual vouches
    balance:
      type: object
      required:
        - received
        - deposited
        - mutual
      properties:
        received:
          type: number
          description: Current balance in vouches received
        deposited:
          type: number
          description: Current balance in vouches deposited
        mutual:
          type: number
          description: Current balance in mutual vouches
    count:
      type: object
      required:
        - received
        - deposited
        - mutual
      properties:
        received:
          type: integer
          description: Number of vouches received
        deposited:
          type: integer
          description: Number of vouches deposited
        mutual:
          type: integer
          description: Number of mutual vouches
    percentile:
      type: object
      required:
        - received
        - deposited
        - mutual
      properties:
        received:
          type: number
          description: Percentile ranking for vouches received (0-100)
        deposited:
          type: number
          description: Percentile ranking for vouches deposited (0-100)
        mutual:
          type: number
          description: Percentile ranking for mutual vouches (0-100)

VouchedEthereumRequest:
  type: object
  required:
    - target
  properties:
    target:
      type: string
      description: User identifier (address, profile ID, or attestation)

VouchedEthereumResponse:
  type: object
  required:
    - amount
  properties:
    amount:
      type: string
      description: Total amount of ETH vouched for the user

MostCredibleVouchersRequest:
  type: object
  required:
    - target
  properties:
    target:
      type: string
      description: User identifier (address, profile ID, or attestation)
    limit:
      type: integer
      minimum: 1
      default: 10
      description: Maximum number of vouchers to return

Voucher:
  type: object
  required:
    - profileId
    - name
    - score
    - amount
  properties:
    profileId:
      type: integer
      description: Profile ID of the voucher
    name:
      type: string
      description: Name of the voucher
    avatarUrl:
      type: string
      nullable: true
      description: URL to the voucher's avatar
    score:
      type: number
      description: Credibility score of the voucher
    amount:
      type: string
      description: Amount vouched by this voucher

MostCredibleVouchersResponse:
  type: object
  required:
    - vouchers
  properties:
    vouchers:
      type: array
      description: List of most credible vouchers
      items:
        $ref: '#/Voucher'

MutualVouchersRequest:
  type: object
  required:
    - userkey
  properties:
    userkey:
      type: string
      description: User identifier (address, profile ID, or attestation)
    limit:
      type: integer
      minimum: 1
      default: 10
      description: Maximum number of mutual vouchers to return

MutualVoucher:
  type: object
  required:
    - profileId
    - vouchId
    - mutualVouchId
  properties:
    profileId:
      type: integer
      description: Profile ID of the mutual voucher
    name:
      type: string
      description: Name of the mutual voucher
    avatarUrl:
      type: string
      nullable: true
      description: URL to the mutual voucher's avatar
    vouchId:
      type: integer
      description: ID of the vouch from the user to this voucher
    mutualVouchId:
      type: integer
      description: ID of the vouch from this voucher to the user

MutualVouchersResponse:
  type: object
  required:
    - mutualVouchers
  properties:
    mutualVouchers:
      type: array
      description: List of mutual vouchers
      items:
        $ref: '#/MutualVoucher'

VouchRewardsRequest:
  type: object
  required:
    - userkeys
  properties:
    userkeys:
      type: array
      description: Array of user identifiers
      items:
        type: string

VouchRewardsResponse:
  type: object
  additionalProperties:
    type: object
    required:
      - rewards
      - lifetime
    properties:
      rewards:
        type: number
        description: Current rewards from vouches
      lifetime:
        type: number
        description: Lifetime rewards from vouches

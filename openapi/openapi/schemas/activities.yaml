# Activity-specific schemas

ActivityActor:
  type: object
  properties:
    profileId:
      type: integer
      description: Profile ID of the actor
    name:
      type: string
      description: Display name of the actor
    avatarUrl:
      type: string
      description: URL to the actor's avatar image
    score:
      type: number
      description: Reputation score of the actor
    xp:
      type: integer
      description: Experience points of the actor
    address:
      type: string
      description: Ethereum address of the actor

VoteCounts:
  type: object
  properties:
    up:
      type: integer
      description: Number of upvotes
    down:
      type: integer
      description: Number of downvotes

ReplySummary:
  type: object
  properties:
    count:
      type: integer
      description: Number of replies

BlockchainEvent:
  type: object
  properties:
    id:
      type: integer
      description: Event ID
    txHash:
      type: string
      description: Transaction hash
    blockNumber:
      type: integer
      description: Block number
    timestamp:
      type: string
      format: date-time
      description: Event timestamp

BaseActivityInfo:
  type: object
  properties:
    type:
      type: string
      description: Type of activity
    timestamp:
      type: string
      format: date-time
      description: Activity timestamp
    votes:
      $ref: '#/VoteCounts'
    replySummary:
      $ref: '#/ReplySummary'
    author:
      $ref: '#/ActivityActor'
    subject:
      $ref: '#/ActivityActor'
    events:
      type: array
      items:
        $ref: '#/BlockchainEvent'

VouchActivityData:
  type: object
  properties:
    id:
      type: integer
      description: Vouch ID
    authorProfileId:
      type: integer
      description: Profile ID of the author
    subjectProfileId:
      type: integer
      description: Profile ID of the subject
    comment:
      type: string
      description: Vouch comment
    amount:
      type: string
      description: Vouch amount in ETH
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp

VouchActivity:
  allOf:
    - $ref: '#/BaseActivityInfo'
    - type: object
      properties:
        type:
          type: string
          enum: [vouch]
        data:
          $ref: '#/VouchActivityData'

ReviewActivityData:
  type: object
  properties:
    id:
      type: integer
      description: Review ID
    authorProfileId:
      type: integer
      description: Profile ID of the author
    subjectProfileId:
      type: integer
      description: Profile ID of the subject
    comment:
      type: string
      description: Review comment
    rating:
      type: integer
      minimum: 1
      maximum: 5
      description: Review rating
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp

ReviewActivity:
  allOf:
    - $ref: '#/BaseActivityInfo'
    - type: object
      properties:
        type:
          type: string
          enum: [review]
        data:
          $ref: '#/ReviewActivityData'

AttestationActivityData:
  type: object
  properties:
    id:
      type: integer
      description: Attestation ID
    service:
      type: string
      description: Service name (e.g., "x.com")
    username:
      type: string
      description: Username on the service
    profileId:
      type: integer
      description: Profile ID
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp

AttestationActivity:
  allOf:
    - $ref: '#/BaseActivityInfo'
    - type: object
      properties:
        type:
          type: string
          enum: [attestation]
        data:
          $ref: '#/AttestationActivityData'

InvitationAcceptedActivityData:
  type: object
  properties:
    id:
      type: integer
      description: Profile ID of the invited user
    invitedBy:
      type: integer
      description: Profile ID of the inviter
    nickname:
      type: string
      description: Nickname of the invited user
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp

InvitationAcceptedActivity:
  allOf:
    - $ref: '#/BaseActivityInfo'
    - type: object
      properties:
        type:
          type: string
          enum: [invitation-accepted]
        data:
          $ref: '#/InvitationAcceptedActivityData'

# Unified ActivityInfo type that can be any type of activity
ActivityInfo:
  oneOf:
    - $ref: '#/VouchActivity'
    - $ref: '#/ReviewActivity'
    - $ref: '#/AttestationActivity'
    - $ref: '#/InvitationAcceptedActivity'

# Vote information for an activity
VoteInfo:
  type: object
  properties:
    userVote:
      type: string
      enum: [up, down]
      nullable: true
      description: The user's vote (null if no vote)
    counts:
      $ref: '#/VoteCounts'

# Response for bulk votes endpoint
BulkVotes:
  type: object
  additionalProperties:
    type: object
    additionalProperties:
      $ref: '#/VoteInfo'

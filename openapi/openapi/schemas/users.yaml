# Schemas for the Users API

# User search request parameters
UserSearchRequest:
  type: object
  required:
    - query
  properties:
    query:
      type: string
      minLength: 2
      maxLength: 100
      description: Search query for finding users by name, username, or address
    limit:
      type: integer
      minimum: 1
      maximum: 100
      default: 20
      description: Maximum number of results to return
    offset:
      type: integer
      minimum: 0
      default: 0
      description: Number of results to skip for pagination

# User search response
UserSearchResponse:
  type: object
  required:
    - values
    - total
    - limit
    - offset
  properties:
    values:
      type: array
      items:
        $ref: '#/User'
      description: Array of users matching the search criteria
    total:
      type: integer
      description: Total number of matching users (for pagination)
    limit:
      type: integer
      description: Maximum number of results returned
    offset:
      type: integer
      description: Number of results skipped

# User stats parameters
UserStatsRequest:
  type: object
  required:
    - userkey
  properties:
    userkey:
      type: string
      description: User identifier (profile ID, address, or username)
    startDate:
      type: string
      format: date
      description: Optional start date for filtering stats (format YYYY-MM-DD)
    endDate:
      type: string
      format: date
      description: Optional end date for filtering stats (format YYYY-MM-DD)

# User stats response
UserStatsResponse:
  type: object
  required:
    - reviews
    - vouches
  properties:
    reviews:
      type: object
      required:
        - received
        - positiveReviewPercentage
        - percentile
        - positiveReviewCount
        - negativeReviewCount
        - neutralReviewCount
      properties:
        received:
          type: integer
          description: Total number of reviews received
        positiveReviewPercentage:
          type: number
          format: float
          description: Percentage of positive reviews out of all non-neutral reviews
        percentile:
          type: number
          format: float
          description: User's percentile rank based on reviews (0-100)
        positiveReviewCount:
          type: integer
          description: Number of positive reviews received
        negativeReviewCount:
          type: integer
          description: Number of negative reviews received
        neutralReviewCount:
          type: integer
          description: Number of neutral reviews received
    vouches:
      type: object
      required:
        - staked
        - balance
        - count
        - percentile
      properties:
        staked:
          type: object
          required:
            - received
            - deposited
            - mutual
          properties:
            received:
              type: number
              format: float
              description: Total amount staked in vouches received (in ETH)
            deposited:
              type: number
              format: float
              description: Total amount staked in vouches given (in ETH)
            mutual:
              type: number
              format: float
              description: Total amount staked in mutual vouches (in ETH)
        balance:
          type: object
          required:
            - received
            - deposited
            - mutual
          properties:
            received:
              type: number
              format: float
              description: Current balance in vouches received (in ETH)
            deposited:
              type: number
              format: float
              description: Current balance in vouches given (in ETH)
            mutual:
              type: number
              format: float
              description: Current balance in mutual vouches (in ETH)
        count:
          type: object
          required:
            - received
            - deposited
            - mutual
          properties:
            received:
              type: integer
              description: Number of vouches received
            deposited:
              type: integer
              description: Number of vouches given
            mutual:
              type: integer
              description: Number of mutual vouches
        percentile:
          type: object
          required:
            - received
            - deposited
            - mutual
          properties:
            received:
              type: number
              format: float
              description: Percentile rank for vouches received (0-100)
            deposited:
              type: number
              format: float
              description: Percentile rank for vouches given (0-100)
            mutual:
              type: number
              format: float
              description: Percentile rank for mutual vouches (0-100)

# Extension user info request parameters
ExtensionUserInfoRequest:
  type: object
  required:
    - twitterUsername
  properties:
    twitterUsername:
      type: string
      description: Twitter (X) username to look up information for

# Extension user info response
ExtensionUserInfoResponse:
  type: object
  properties:
    actor:
      $ref: '../schemas/activities.yaml#/ActivityActor'
      description: User profile information
    vouchStats:
      $ref: '../schemas/vouches.yaml#/VouchStatsResponse'
      description: Vouch statistics
    reviewStats:
      $ref: '../schemas/reviews.yaml#/ReviewStats'
      description: Review statistics
    openSlash:
      type: object
      properties:
        slashId:
          type: integer
          description: ID of the open slash
        slug:
          type: string
          description: Slug for the slash URL
        upvotes:
          type: integer
          description: Number of upvotes
        downvotes:
          type: integer
          description: Number of downvotes
      description: Information about an open slash against the user, if any
    market:
      type: object
      description: Market information for the user

# User model
User:
  type: object
  required:
    - id
    - username
    - displayName
    - userkeys
  properties:
    id:
      type: integer
      description: Unique user ID
    username:
      type: string
      description: Username
    displayName:
      type: string
      description: Display name
    userkeys:
      type: array
      items:
        type: string
      description: List of user identifiers (addresses, social handles, etc.)

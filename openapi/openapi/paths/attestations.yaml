attestations_query:
  post:
    summary: Query Attestations
    description: |
      Retrieves attestations based on specified filters.
      Attestations are verifications of a user's identity on external services like X (Twitter).
    operationId: getAttestationsQuery
    tags:
      - Attestations
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/attestations.yaml#/AttestationQueryRequest'
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              $ref: '../schemas/attestations.yaml#/AttestationQueryResponse'
      '400':
        description: Bad request - must specify either attestationHashes or profileIds
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'BAD_REQUEST'
                    message:
                      type: string
                      example: 'Must specify either attestationHashes or profileIds'
                    fields:
                      type: array
                      items:
                        type: string
                      example: ['attestationHashes', 'profileIds']
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'UNEXPECTED_ERROR'
                    message:
                      type: string
                      example: 'Something went wrong! Please try again later.'

attestations_extended_query:
  post:
    summary: Query Extended Attestations
    description: |
      Retrieves attestations with extended information, such as usernames, display names,
      and avatar URLs for social media accounts.
    operationId: getExtendedAttestationsQuery
    tags:
      - Attestations
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/attestations.yaml#/ExtendedAttestationQueryRequest'
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              $ref: '../schemas/attestations.yaml#/ExtendedAttestationQueryResponse'
      '400':
        description: Bad request - must specify either attestationHashes or profileIds
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'BAD_REQUEST'
                    message:
                      type: string
                      example: 'Must specify either attestationHashes or profileIds'
                    fields:
                      type: array
                      items:
                        type: string
                      example: ['attestationHashes', 'profileIds']
      '404':
        description: Attestation details not found
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'NOT_FOUND'
                    message:
                      type: string
                      example: 'Attestation details not found'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'UNEXPECTED_ERROR'
                    message:
                      type: string
                      example: 'Something went wrong! Please try again later.'

create_attestation_signature:
  post:
    summary: Create Attestation Signature
    description: |
      Creates a cryptographic signature that can be used to register an attestation on-chain.
      This endpoint allows users to verify ownership of social accounts like X (Twitter).

      A valid Privy session and profile are required.
    operationId: createAttestationSignature
    tags:
      - Attestations
    security:
      - privyAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/attestations.yaml#/CreateAttestationSignatureRequest'
    responses:
      '200':
        description: Successful operation
        content:
          application/json:
            schema:
              $ref: '../schemas/attestations.yaml#/CreateAttestationSignatureResponse'
      '400':
        description: Bad request - social account already connected
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'BAD_REQUEST'
                    message:
                      type: string
                      example: 'Social account already connected'
                    fields:
                      type: array
                      items:
                        type: string
                      example: ['service', 'account']
      '401':
        description: Unauthorized - invalid privy session
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'UNAUTHORIZED'
                    message:
                      type: string
                      example: 'Invalid privy session'
      '403':
        description: Forbidden - no Twitter account connected
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'FORBIDDEN'
                    message:
                      type: string
                      example: 'No Twitter account connected'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              type: object
              properties:
                ok:
                  type: boolean
                  example: false
                error:
                  type: object
                  properties:
                    code:
                      type: string
                      example: 'UNEXPECTED_ERROR'
                    message:
                      type: string
                      example: 'Something went wrong! Please try again later.'
